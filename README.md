# inteq
IntEQ: Recognizing Benign Integer Overflows via Equivalence Checking Across Multiple Precisions

IntEQ is a static integer overflow classifier, based on the GCC compiler and the Z3 solver, aiming to improve the accuracy of integer overflow detection. Given an IO report (generated by a third party tool), our tool first leverages a static data flow analysis to extract the data flow path from the overflowed integer arithmetic operation to a sink, and then creates a new version of the path with higher representation precision using types with sufficient bits. At last, IntEQ leverages a constraint solver, Z3, to reason about the equivalence of the two versions with all possible inputs. If equivalent, we report this IO as benign.

The corresponding research paper is named "IntEQ: Recognizing Benign Integer Overlfow via Equivalence Checking Across Multiple Precisions", which was accepted by ICSE 2016. This paper can be obtained at http://2016.icse.cs.txstate.edu/technical-research


How To Use?

Step 1: Install IOC
About IOC: IOC is one of the state-of-the-art IO detection tools. It instruments all integer arithmetic operations to catch IOs at runtime. IOC is published in the ICSE 2012 research paper (http://dl.acm.org/citation.cfm?id=2337223.2337313). Currently, IOC has been integrated into the LLVM project. 
How to use IOC: In IntEQ, we choose llvm-3.5 and IOC can be easily invoked by adding "-fsanitize=integer" compiling option. The IO report produced by IOC is in fixed format, including the file name, line number, column number, operation type and sign information. The following is an example:
	unsigned.c:2:13: runtime error: unsigned integer overflow: 0 - 1 cannot be represented in type 'unsigned int'
Note that all these IO reports are stored in a file named "make.out".

Step 2: Install parser utility to extract all IO information
Run: gcc parser.c -o parser; ./parser
Our parser utility would read "make.out" and extract useful IO information into a file named "ios.def".
Then, we move "ios.def" into /tmp/ for GCC to use.


Step 3: Install GCC with the patch
In IntEQ, we use GCC-4.5.0 for the main analysis, i.e. extracting all potential data flow paths for each overflowed integer operation and encoding the paths into bit-vector logic constraints.
a) download gcc 4.5.0
b) run the patch: cd gcc-4.5.0-src/gcc/; patch -p < inteq-gcc450.patch
c) install this extended GCC
d) the main analysis can be invoked by adding "-fintfns"
e) all the Z3 constraints are stored in the directory /tmp/z3paths/

Step 4: Install Z3 and resolve the constraints
In IntEQ, we choose Z3-4.3.2 version.
a) run the shellcode script "run.sh" to invoke Z3 to resolve all the collected constraints.
b) gcc intchecker-z3.c -o intchecker-z3; ./intchecker-z3
	We use this utility to calculate all the benign integer overflows (stored in solving-result).


Contact:
Please contact with shqking@gmail.com if you have any problem.


